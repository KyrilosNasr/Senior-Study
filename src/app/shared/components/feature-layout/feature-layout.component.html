<div class="flex min-h-screen" [class]="accentClass()">
    <!-- Sidebar Component -->
    <app-sidebar [config]="sidebarConfig" [treeNodes]="treeNodes" [sidebarVisible]="sidebarVisible"
        (nodeSelect)="onNodeSelect($event)" (expandedChange)="sidebarExpanded.set($event)"></app-sidebar>

    <!-- Main Content - with dynamic margin for sidebar -->
    <main [class]="'flex-1 flex flex-col w-full transition-all duration-300 ' + mainContentClass()">
        <!-- Mobile Header -->
        <header class="lg:hidden glass sticky top-0 z-30 shadow-modern p-4 flex items-center justify-between gap-3">
            <button pButton type="button" (click)="toggleSidebar()"
                class="p-button-text p-button-rounded hover:bg-gray-100 dark:hover:bg-gray-700" aria-label="Open menu">
                <ng-icon name="faSolidBars" size="1.25rem" aria-hidden="true"></ng-icon>
            </button>
            <h1 class="text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 flex-1 text-center truncate">
                {{ title }}
            </h1>
            <app-theme-toggle></app-theme-toggle>
        </header>

        <!-- Desktop Header -->
        <app-page-header [title]="title" [subtitle]="subtitle"></app-page-header>

        <!-- Content Area -->
        <div
            [class]="'flex-1 p-4 sm:p-6 lg:p-8 xl:p-12 text-gray-900 dark:text-gray-100 ' + contentGradient() + ' min-h-[calc(100vh-5rem)]'">
            <div class="fade-in">
                <router-outlet></router-outlet>
            </div>
        </div>

        <!-- Footer -->
        <app-footer></app-footer>
    </main>
</div>
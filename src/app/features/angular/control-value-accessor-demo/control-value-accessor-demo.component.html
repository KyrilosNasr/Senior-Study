<div class="container-responsive space-y-responsive">
  <!-- Hero Header -->
  <div class="card-modern padding-responsive hover-lift slide-in-up">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
      <div class="flex-1">
        <div class="flex items-center gap-3 mb-4">
          <div
            class="w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-lg">
            <i class="fas fa-plug text-white text-xl sm:text-2xl"></i>
          </div>
          <div>
            <span class="badge-modern text-xs sm:text-sm">Angular Topics</span>
          </div>
        </div>
        <h1 class="heading-responsive text-gradient mb-4">
          ControlValueAccessor
        </h1>
        <p class="text-responsive text-gray-700 dark:text-gray-300">
          Demonstrates custom form controls using ControlValueAccessor interface. The FormFieldRendererComponent
          implements ControlValueAccessor to work seamlessly with Angular Reactive Forms.
        </p>
      </div>
      <div class="hidden lg:block">
        <div
          class="w-32 h-32 rounded-2xl bg-[var(--accent-color)]/10 dark:bg-[var(--accent-color)]/20 flex items-center justify-center backdrop-blur-sm border border-[var(--accent-color)]/20">
          <i class="fas fa-puzzle-piece text-6xl text-accent"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Demo Tabs -->
  <p-card class="card-modern hover-lift slide-in-up">
    <div class="padding-responsive">
      <div class="flex items-center gap-3 mb-6">
        <div
          class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-md">
          <i class="fas fa-play-circle text-white"></i>
        </div>
        <h2 class="subheading-responsive text-accent">Learn & Practice</h2>
      </div>

      <p-tabs [(value)]="activeTab" class="w-full">
        <p-tablist class="flex flex-wrap gap-2 mb-6">
          <p-tab [value]="'0'" class="flex items-center gap-2">
            <i class="fas fa-info-circle text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">Overview</span>
          </p-tab>
          <p-tab [value]="'1'" class="flex items-center gap-2">
            <i class="fas fa-file-alt text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">Dynamic Form</span>
          </p-tab>
          <p-tab [value]="'2'" class="flex items-center gap-2">
            <i class="fas fa-code text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">Code Examples</span>
          </p-tab>
        </p-tablist>

        <p-tabpanels>
          <!-- Overview -->
          <p-tabpanel [value]="'0'">
            <div class="space-y-6">
              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center gap-3 mb-4">
                  <i class="fas fa-lightbulb text-accent text-xl"></i>
                  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">
                    What is ControlValueAccessor?
                  </h3>
                </div>
                <p class="text-responsive text-gray-700 dark:text-gray-300 leading-relaxed mb-6">
                  ControlValueAccessor is an interface that allows custom form controls to integrate
                  seamlessly with Angular's Reactive Forms and Template-driven Forms. It provides a bridge
                  between form controls and custom components.
                </p>

                <div class="card-modern p-6">
                  <div class="flex items-center gap-3 mb-4">
                    <i class="fas fa-star text-accent text-xl"></i>
                    <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Key Features</h4>
                  </div>
                  <ul class="list-modern">
                    <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
                      Enables custom components to work with formControl and ngModel
                    </li>
                    <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
                      Provides writeValue() to set component value from form
                    </li>
                    <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
                      Provides registerOnChange() to notify form of value changes
                    </li>
                    <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
                      Provides registerOnTouched() to mark form as touched
                    </li>
                    <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
                      Allows setDisabledState() for disabled state management
                    </li>
                  </ul>
                </div>
              </div>

              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center gap-3 mb-4">
                  <i class="fas fa-cogs text-accent text-xl"></i>
                  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">
                    Implementation in FormFieldRendererComponent
                  </h3>
                </div>
                <p class="text-responsive text-gray-700 dark:text-gray-300 leading-relaxed">
                  The FormFieldRendererComponent implements ControlValueAccessor, allowing it to be used
                  directly with Angular's form controls. This enables the dynamic form to work with reactive forms
                  without any additional configuration.
                </p>
              </div>
            </div>
          </p-tabpanel>

          <!-- Dynamic Form -->
          <p-tabpanel [value]="'1'">
            <div class="glass rounded-xl p-6 border-l-4 border-accent">
              <div class="flex items-center gap-3 mb-6">
                <i class="fas fa-file-alt text-accent text-xl"></i>
                <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">
                  Dynamic Form with ControlValueAccessor
                </h3>
              </div>
              <p class="text-responsive text-gray-600 dark:text-gray-400 mb-6">
                This form uses FormFieldRendererComponent which implements ControlValueAccessor internally.
                Each field is a custom form control that integrates seamlessly with Angular Reactive Forms.
              </p>
              <app-dynamic-form [config]="dynamicFormConfig" (formSubmit)="onDynamicFormSubmit($event)" />
            </div>
          </p-tabpanel>

          <!-- Code Examples -->
          <p-tabpanel [value]="'2'">
            <div class="space-y-6">
              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center gap-3 mb-6">
                  <i class="fas fa-code text-accent text-xl"></i>
                  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">Code Examples</h3>
                </div>

                <div class="space-y-6">
                  <div>
                    <div class="flex items-center gap-2 mb-3">
                      <i class="fas fa-file-code text-accent"></i>
                      <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">ControlValueAccessor Interface
                      </h4>
                    </div>
                    <div class="code-block-modern">
                      <pre class="overflow-x-auto text-sm"><code>interface ControlValueAccessor &#123;
  writeValue(value: any): void;
  registerOnChange(fn: any): void;
  registerOnTouched(fn: any): void;
  setDisabledState?(isDisabled: boolean): void;
&#125;</code></pre>
                    </div>
                  </div>

                  <div>
                    <div class="flex items-center gap-2 mb-3">
                      <i class="fas fa-cog text-accent"></i>
                      <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Implementation Example</h4>
                    </div>
                    <div class="code-block-modern">
                      <pre class="overflow-x-auto text-sm"><code>@Component(&#123;
  providers: [&#123;
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() =&gt; FormFieldRendererComponent),
    multi: true
  &#125;]
&#125;)
export class FormFieldRendererComponent
  implements ControlValueAccessor &#123;
  
  private onChange = (value: any) =&gt; &#123;&#125;;
  private onTouched = () =&gt; &#123;&#125;;

  writeValue(value: any): void &#123;
    this.control.setValue(value, &#123; emitEvent: false &#125;);
  &#125;

  registerOnChange(fn: any): void &#123;
    this.onChange = fn;
  &#125;

  registerOnTouched(fn: any): void &#123;
    this.onTouched = fn;
  &#125;

  setDisabledState(isDisabled: boolean): void &#123;
    if (isDisabled) &#123;
      this.control.disable();
    &#125; else &#123;
      this.control.enable();
    &#125;
  &#125;
&#125;</code></pre>
                    </div>
                  </div>

                  <div>
                    <div class="flex items-center gap-2 mb-3">
                      <i class="fas fa-file-alt text-accent"></i>
                      <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Usage in Template</h4>
                    </div>
                    <div class="code-block-modern">
                      <pre class="overflow-x-auto text-sm"><code>&lt;form [formGroup]="form"&gt;
  &lt;app-form-field-renderer
    [fieldConfig]="field"
    [control]="form.get('name')"
  /&gt;
&lt;/form&gt;</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </p-tabpanel>
        </p-tabpanels>
      </p-tabs>
    </div>
  </p-card>

  <!-- Key Takeaways -->
  <p-card class="card-modern hover-lift slide-in-up">
    <div class="padding-responsive">
      <div class="flex items-center gap-3 mb-6">
        <div
          class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-md">
          <i class="fas fa-graduation-cap text-white"></i>
        </div>
        <h2 class="subheading-responsive text-gray-900 dark:text-gray-100">Key Takeaways</h2>
      </div>

      <ul class="list-modern">
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          ControlValueAccessor bridges custom components with Angular forms
        </li>
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          Implement four methods: writeValue, registerOnChange, registerOnTouched, setDisabledState
        </li>
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          Use NG_VALUE_ACCESSOR provider to register your component
        </li>
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          Works with both Reactive Forms and Template-driven Forms
        </li>
      </ul>
    </div>
  </p-card>
</div>
<div class="container-responsive space-y-responsive">
  <!-- Hero Header -->
  <div class="card-modern padding-responsive hover-lift slide-in-up">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
      <div class="flex-1">
        <div class="flex items-center gap-3 mb-4">
          <div
            class="w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-lg">
            <i class="fas fa-code-branch text-white text-xl sm:text-2xl"></i>
          </div>
          <div>
            <span class="badge-modern text-xs sm:text-sm">Angular Topics</span>
          </div>
        </div>
        <h1 class="heading-responsive text-gradient mb-4">
          Modern Control Flow
        </h1>
        <p class="text-responsive text-gray-700 dark:text-gray-300">
          Demonstrates Angular's modern control flow syntax: &#64;if, &#64;for, &#64;switch, and &#64;defer.
          These new syntaxes replace *ngIf, *ngFor, and provide better performance and developer experience.
        </p>
      </div>
      <div class="hidden lg:block">
        <div
          class="w-32 h-32 rounded-2xl bg-[var(--accent-color)]/10 dark:bg-[var(--accent-color)]/20 flex items-center justify-center backdrop-blur-sm border border-[var(--accent-color)]/20">
          <i class="fas fa-sitemap text-6xl text-accent"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Demo Tabs -->
  <p-card class="card-modern hover-lift slide-in-up">
    <div class="padding-responsive">
      <div class="flex items-center gap-3 mb-6">
        <div
          class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-md">
          <i class="fas fa-play-circle text-white"></i>
        </div>
        <h2 class="subheading-responsive text-accent">Interactive Demos</h2>
      </div>

      <p-tabs [(value)]="activeTab" class="w-full">
        <p-tablist class="flex flex-wrap gap-2 mb-6">
          <p-tab [value]="'0'" class="flex items-center gap-2">
            <i class="fas fa-question-circle text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">&#64;if/&#64;else</span>
          </p-tab>
          <p-tab [value]="'1'" class="flex items-center gap-2">
            <i class="fas fa-redo text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">&#64;for</span>
          </p-tab>
          <p-tab [value]="'2'" class="flex items-center gap-2">
            <i class="fas fa-random text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">&#64;switch</span>
          </p-tab>
          <p-tab [value]="'3'" class="flex items-center gap-2">
            <i class="fas fa-clock text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">&#64;defer</span>
          </p-tab>
          <p-tab [value]="'4'" class="flex items-center gap-2">
            <i class="fas fa-code text-accent"></i>
            <span class="text-sm sm:text-base font-semibold">Code Examples</span>
          </p-tab>
        </p-tablist>

        <p-tabpanels>
          <!-- @if/@else -->
          <p-tabpanel [value]="'0'">
            <div class="space-y-6">
              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center gap-3 mb-6">
                  <i class="fas fa-question-circle text-accent text-xl"></i>
                  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">
                    &#64;if / &#64;else / &#64;else if
                  </h3>
                </div>

                <div class="card-modern p-6 hover-lift">
                  <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center gap-3">
                      <div
                        class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-sm">
                        <i class="fas fa-hashtag text-white"></i>
                      </div>
                      <span class="text-2xl font-bold text-gradient">Count: {{ count() }}</span>
                    </div>
                    <p-button label="Increment" (onClick)="increment()" icon="pi pi-plus" />
                  </div>

                  <!-- @if example -->
                  @if (isEven()) {
                  <div
                    class="p-4 rounded-xl bg-gradient-to-r from-green-500/20 to-teal-500/20 border border-green-500/30 mb-4">
                    <div class="flex items-center gap-3">
                      <i class="fas fa-check-circle text-green-500 text-xl"></i>
                      <p class="text-green-800 dark:text-green-200 font-semibold">
                        Count is even!
                      </p>
                    </div>
                  </div>
                  } @else {
                  <div
                    class="p-4 rounded-xl bg-gradient-to-r from-[var(--accent-gradient-from)]/20 to-[var(--accent-gradient-to)]/20 border border-[var(--accent-color)]/30 mb-4">
                    <div class="flex items-center gap-3">
                      <i class="fas fa-info-circle text-accent text-xl"></i>
                      <p class="text-accent-dark dark:text-accent-light font-semibold">
                        Count is odd
                      </p>
                    </div>
                  </div>
                  }

                  <!-- @if with @else if -->
                  <div class="mt-4 p-4 card-modern">
                    <p class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Range Check:</p>
                    @if (count() === 0) {
                    <span class="badge-modern">Count is zero</span>
                    } @else if (count() < 5) { <span
                      class="px-3 py-1 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 text-sm font-semibold">
                      Count is less than 5
                      </span>
                      } @else {
                      <span
                        class="px-3 py-1 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 text-sm font-semibold">
                        Count is 5 or more
                      </span>
                      }
                  </div>
                </div>
              </div>
            </div>
          </p-tabpanel>

          <!-- @for -->
          <p-tabpanel [value]="'1'">
            <div class="space-y-6">
              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center justify-between mb-6">
                  <div class="flex items-center gap-3">
                    <i class="fas fa-redo text-accent text-xl"></i>
                    <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">
                      &#64;for Loop
                    </h3>
                  </div>
                  <span class="badge-modern">{{ itemCount() }} items</span>
                </div>

                <div class="card-modern p-6 hover-lift">
                  <div class="flex items-center justify-end mb-4">
                    <p-button label="Add Item" icon="pi pi-plus" (onClick)="addItem()" />
                  </div>

                  <!-- @for example -->
                  <div class="space-y-3">
                    @for (item of items(); track $index) {
                    <div class="flex items-center justify-between p-4 card-modern hover-lift border-l-4 border-accent">
                      <div class="flex items-center gap-3">
                        <div
                          class="w-8 h-8 rounded-full bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center text-white font-bold text-sm shadow-sm">
                          {{ $index + 1 }}
                        </div>
                        <span class="text-gray-900 dark:text-gray-100 font-medium">{{ item }}</span>
                      </div>
                      <p-button icon="pi pi-trash" severity="danger" [text]="true" [size]="'small'"
                        (onClick)="removeItem($index)" />
                    </div>
                    } @empty {
                    <div class="p-8 text-center card-modern">
                      <i class="fas fa-inbox text-gray-400 text-4xl mb-3"></i>
                      <p class="text-gray-500 dark:text-gray-400">No items available</p>
                    </div>
                    }
                  </div>
                </div>
              </div>
            </div>
          </p-tabpanel>

          <!-- @switch -->
          <p-tabpanel [value]="'2'">
            <div class="space-y-6">
              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center gap-3 mb-6">
                  <i class="fas fa-random text-accent text-xl"></i>
                  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">
                    &#64;switch Statement
                  </h3>
                </div>

                <div class="card-modern p-6 hover-lift">
                  <div class="flex flex-wrap gap-3 mb-6">
                    <p-button label="Option 1" [severity]="selectedOption() === 'option1' ? 'primary' : 'secondary'"
                      (onClick)="selectOption('option1')" />
                    <p-button label="Option 2" [severity]="selectedOption() === 'option2' ? 'primary' : 'secondary'"
                      (onClick)="selectOption('option2')" />
                    <p-button label="Option 3" [severity]="selectedOption() === 'option3' ? 'primary' : 'secondary'"
                      (onClick)="selectOption('option3')" />
                  </div>

                  <!-- @switch example -->
                  <div class="mt-4">
                    @switch (selectedOption()) {
                    @case ('option1') {
                    <div class="p-4 rounded-xl bg-accent-light/10 border border-accent/20">
                      <div class="flex items-center gap-3">
                        <div
                          class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center">
                          <span class="text-white font-bold">1</span>
                        </div>
                        <p class="text-accent-dark dark:text-accent-light font-semibold">
                          Option 1 Selected
                        </p>
                      </div>
                    </div>
                    }
                    @case ('option2') {
                    <div class="p-4 rounded-xl bg-accent-light/10 border border-accent/20">
                      <div class="flex items-center gap-3">
                        <div
                          class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center">
                          <span class="text-white font-bold">2</span>
                        </div>
                        <p class="text-accent-dark dark:text-accent-light font-semibold">
                          Option 2 Selected
                        </p>
                      </div>
                    </div>
                    }
                    @case ('option3') {
                    <div class="p-4 rounded-xl bg-accent-light/10 border border-accent/20">
                      <div class="flex items-center gap-3">
                        <div
                          class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center">
                          <span class="text-white font-bold">3</span>
                        </div>
                        <p class="text-accent-dark dark:text-accent-light font-semibold">
                          Option 3 Selected
                        </p>
                      </div>
                    </div>
                    }
                    @default {
                    <div class="p-4 card-modern">
                      <p class="text-gray-600 dark:text-gray-400">No option selected</p>
                    </div>
                    }
                    }
                  </div>
                </div>
              </div>
            </div>
          </p-tabpanel>

          <!-- @defer -->
          <p-tabpanel [value]="'3'">
            <div class="space-y-6">
              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center gap-3 mb-6">
                  <i class="fas fa-clock text-accent text-xl"></i>
                  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">
                    &#64;defer Block
                  </h3>
                </div>

                <div class="card-modern p-6 hover-lift">
                  <p-button label="Load Deferred Content" (onClick)="loadDeferred()" [disabled]="showDeferred()"
                    icon="pi pi-download" class="mb-6" />

                  <!-- @defer example -->
                  @if (showDeferred()) {
                  <div class="p-6 rounded-xl bg-accent-light/10 border border-accent/20 fade-in">
                    <div class="flex items-center gap-3 mb-3">
                      <div
                        class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-md">
                        <i class="fas fa-check text-white"></i>
                      </div>
                      <p class="text-accent-dark dark:text-accent-light font-semibold">
                        Deferred content loaded!
                      </p>
                    </div>
                    <p class="text-sm text-gray-700 dark:text-gray-300 mt-2">
                      This content was loaded conditionally using &#64;if
                    </p>
                    <p
                      class="text-xs text-accent-dark dark:text-accent-light mt-2 p-3 bg-accent-light/10 rounded-lg border border-accent/10">
                      <i class="fas fa-info-circle mr-2"></i>
                      Note: &#64;defer is typically used for lazy loading components. In this demo, we
                      show conditional rendering with &#64;if.
                    </p>
                  </div>
                  } @else {
                  <div class="p-6 card-modern text-center">
                    <i class="fas fa-download text-gray-400 text-4xl mb-3"></i>
                    <p class="text-gray-500 dark:text-gray-400">
                      Click the button above to load deferred content
                    </p>
                  </div>
                  }
                </div>
              </div>
            </div>
          </p-tabpanel>

          <!-- Code Examples -->
          <p-tabpanel [value]="'4'">
            <div class="space-y-6">
              <div class="glass rounded-xl p-6 border-l-4 border-accent">
                <div class="flex items-center gap-3 mb-6">
                  <i class="fas fa-code text-accent text-xl"></i>
                  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100">Code Examples</h3>
                </div>

                <div class="space-y-6">
                  <div>
                    <div class="flex items-center gap-2 mb-3">
                      <i class="fas fa-question-circle text-accent"></i>
                      <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">&#64;if / &#64;else</h4>
                    </div>
                    <div class="code-block-modern">
                      <pre class="overflow-x-auto text-sm"><code>&#64;if (condition) &#123;
  &lt;p&gt;Condition is true&lt;/p&gt;
&#125; &#64;else &#123;
  &lt;p&gt;Condition is false&lt;/p&gt;
&#125;</code></pre>
                    </div>
                  </div>

                  <div>
                    <div class="flex items-center gap-2 mb-3">
                      <i class="fas fa-redo text-accent"></i>
                      <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">&#64;for Loop</h4>
                    </div>
                    <div class="code-block-modern">
                      <pre class="overflow-x-auto text-sm"><code>{{ getForLoopExample() }}</code></pre>
                    </div>
                  </div>

                  <div>
                    <div class="flex items-center gap-2 mb-3">
                      <i class="fas fa-random text-accent"></i>
                      <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">&#64;switch</h4>
                    </div>
                    <div class="code-block-modern">
                      <pre class="overflow-x-auto text-sm"><code>&#64;switch (value) &#123;
  &#64;case ('option1') &#123;
    &lt;p&gt;Option 1&lt;/p&gt;
  &#125;
  &#64;case ('option2') &#123;
    &lt;p&gt;Option 2&lt;/p&gt;
  &#125;
  &#64;default &#123;
    &lt;p&gt;Default&lt;/p&gt;
  &#125;
&#125;</code></pre>
                    </div>
                  </div>

                  <div>
                    <div class="flex items-center gap-2 mb-3">
                      <i class="fas fa-clock text-accent"></i>
                      <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">&#64;defer</h4>
                    </div>
                    <div class="code-block-modern">
                      <pre class="overflow-x-auto text-sm"><code>&#64;defer (on viewport) &#123;
  &lt;heavy-component /&gt;
&#125; &#64;placeholder &#123;
  &lt;div&gt;Loading...&lt;/div&gt;
&#125; &#64;loading (minimum 500ms) &#123;
  &lt;div&gt;Still loading...&lt;/div&gt;
&#125;</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </p-tabpanel>
        </p-tabpanels>
      </p-tabs>
    </div>
  </p-card>

  <!-- Key Takeaways -->
  <p-card class="card-modern hover-lift slide-in-up">
    <div class="padding-responsive">
      <div class="flex items-center gap-3 mb-6">
        <div
          class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--accent-gradient-from)] to-[var(--accent-gradient-to)] flex items-center justify-center shadow-md">
          <i class="fas fa-graduation-cap text-white"></i>
        </div>
        <h2 class="subheading-responsive text-accent">Key Takeaways</h2>
      </div>

      <ul class="list-modern">
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          &#64;if replaces *ngIf with cleaner syntax
        </li>
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          &#64;for replaces *ngFor with built-in track support
        </li>
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          &#64;switch provides native switch-case in templates
        </li>
        <li class="text-sm sm:text-base text-gray-800 dark:text-gray-200">
          &#64;defer enables lazy loading of template sections
        </li>
      </ul>
    </div>
  </p-card>
</div>
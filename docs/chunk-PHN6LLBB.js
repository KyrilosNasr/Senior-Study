import{c as A}from"./chunk-HQCF4P2J.js";import"./chunk-OFQQBTXX.js";import{t as D}from"./chunk-5TVMUKYR.js";import{b as j}from"./chunk-VHQBVC6O.js";import{a as O,b as I,c as L,d as $,e as N,f as P,g as U}from"./chunk-AH7MQ5KM.js";import"./chunk-K33OWSJ3.js";import"./chunk-UB7WHAP5.js";import{p as R,q}from"./chunk-47HPTYDK.js";import{p as w}from"./chunk-FHCI6K3X.js";import"./chunk-FPPZ4BUR.js";import{F as S,Hb as x,Jb as u,L as M,Ma as o,W as E,Xb as i,Yb as p,ab as C,ha as y,m as g,n as h,nb as m,ob as c,pb as _,rb as k,s as f,sb as T,u as v,ub as t,va as d,vb as e,wb as l}from"./chunk-S2MQBBOY.js";import"./chunk-6HR7AMTL.js";function B(r,n){if(r&1&&(t(0,"div",45)(1,"p",66),i(2),e()()),r&2){let a=u();o(2),p(a.mapResult())}}function Q(r,n){if(r&1&&(t(0,"div",50)(1,"p",67),i(2),e()()),r&2){let a=u();o(2),p(a.switchMapResult())}}function F(r,n){if(r&1&&(t(0,"li"),i(1),e()),r&2){let a=n.$implicit;o(),p(a)}}function G(r,n){if(r&1&&(t(0,"div",51)(1,"p",68),i(2,"Request Log:"),e(),t(3,"ul",69),k(4,F,2,1,"li",null,_),e()()),r&2){let a=u();o(4),T(a.requestLogs())}}function H(r,n){if(r&1&&(t(0,"div",55)(1,"p",66),i(2),e()()),r&2){let a=u();o(2),p(a.mergeMapResult())}}function V(r,n){if(r&1&&(t(0,"div",59)(1,"p",66),i(2),e()()),r&2){let a=u();o(2),p(a.concatMapResult())}}function J(r,n){if(r&1&&(t(0,"div",63)(1,"p",66),i(2),e()()),r&2){let a=u();o(2),p(a.exhaustMapResult())}}var W=class r{apiService=y(A);searchQuery=d("");mapResult=d("");switchMapResult=d("");mergeMapResult=d("");concatMapResult=d("");exhaustMapResult=d("");requestLogs=d([]);violationCode=`
// \u274C VIOLATION: Wrong operator choice
// Race conditions, memory leaks, incorrect behavior

@Injectable()
export class UserService {
  private http = inject(HttpClient);
  
  // WRONG - Race condition potential
  searchUsersWrong(query: string) {
    return this.http.get(\`/api/users?q=\${query}\`).pipe(
      mergeMap(users => this.enrichUserData(users)) // DON'T DO THIS
      // Problem: If user types fast, multiple requests run
      // Latest result might arrive before earlier ones
    );
  }
  
  // WRONG - No cancellation
  saveDataWrong(data: any) {
    return this.http.post('/api/save', data).pipe(
      mergeMap(() => this.http.post('/api/log', data))
      // Problem: If called multiple times, all requests execute
    );
  }
}
`;solutionCode=`
// \u2705 SOLUTION: Correct operator selection
// Prevents race conditions, proper cancellation, sequential when needed

@Injectable()
export class UserService {
  private http = inject(HttpClient);
  
  // CORRECT - Cancels previous searches
  searchUsers(query: string) {
    return this.http.get(\`/api/users?q=\${query}\`).pipe(
      switchMap(users => this.enrichUserData(users)) // Latest search wins
    );
  }
  
  // CORRECT - Sequential processing when order matters
  processUserActions(actions: Action[]) {
    return from(actions).pipe(
      concatMap(action => this.http.post('/api/action', action)),
      toArray() // Collect all results
    );
  }
  
  // CORRECT - Prevent duplicate submissions
  saveData(data: any) {
    return this.http.post('/api/save', data).pipe(
      exhaustMap(() => this.http.post('/api/log', data))
      // Ignores new clicks while save is in progress
    );
  }
}

// Operator Selection Guide:
// map() - Simple 1-to-1 transformation
// switchMap() - Cancels previous (search, typeahead)
// mergeMap() - Parallel operations (uploads, analytics)
// concatMap() - Sequential (order matters)
// exhaustMap() - Ignore while busy (save button, login)
`;testMap(){h(1,2,3).pipe(f(n=>n*10)).subscribe(n=>{this.mapResult.set(`Result: ${n}`)})}testSwitchMap(){this.requestLogs.set([]),this.switchMapResult.set("Searching..."),g(["a","ab","abc"]).pipe(E(n=>(this.requestLogs.update(a=>[...a,`Request: "${n}"`]),this.apiService.simulateApiCall(`Results for "${n}"`,500)))).subscribe({next:n=>{this.switchMapResult.set(`Latest: ${n}`),this.requestLogs.update(a=>[...a,`Response: ${n}`])}})}testMergeMap(){this.requestLogs.set([]),this.mergeMapResult.set("Processing..."),g(["file1","file2","file3"]).pipe(v(n=>(this.requestLogs.update(a=>[...a,`Uploading: ${n}`]),this.apiService.simulateApiCall(`Uploaded: ${n}`,300)))).subscribe({next:n=>{this.mergeMapResult.set(`Completed: ${n}`),this.requestLogs.update(a=>[...a,`Done: ${n}`])}})}testConcatMap(){this.requestLogs.set([]),this.concatMapResult.set("Processing sequentially..."),g(["action1","action2","action3"]).pipe(S(n=>(this.requestLogs.update(a=>[...a,`Processing: ${n}`]),this.apiService.simulateApiCall(`Completed: ${n}`,400)))).subscribe({next:n=>{this.concatMapResult.set(`Latest: ${n}`),this.requestLogs.update(a=>[...a,`Done: ${n}`])}})}testExhaustMap(){this.requestLogs.set([]),this.exhaustMapResult.set("Ready to save..."),g(["click1","click2","click3"]).pipe(M(()=>(this.requestLogs.update(n=>[...n,"Save clicked"]),this.apiService.simulateApiCall("Saved!",1e3)))).subscribe({next:n=>{this.exhaustMapResult.set(`Result: ${n}`),this.requestLogs.update(a=>[...a,`Saved: ${n}`])}})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=C({type:r,selectors:[["app-transformation-operators-demo"]],decls:171,vars:8,consts:[[1,"container-responsive","space-y-responsive"],[1,"card-modern","padding-responsive","hover-lift","slide-in-up"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-6"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-4"],[1,"w-12","h-12","sm:w-14","sm:h-14","rounded-xl","bg-gradient-to-br","from-purple-500","to-pink-600","flex","items-center","justify-center","shadow-lg"],[1,"fas","fa-random","text-white","text-xl","sm:text-2xl"],[1,"badge-modern","text-xs","sm:text-sm"],[1,"heading-responsive","text-gradient","mb-4"],[1,"text-responsive","text-gray-700","dark:text-gray-300"],[1,"hidden","lg:block"],[1,"w-32","h-32","rounded-2xl","bg-gradient-to-br","from-purple-500/20","to-pink-600/20","flex","items-center","justify-center"],[1,"fas","fa-random","text-6xl","text-purple-500"],[1,"card-modern","hover-lift","slide-in-up"],[1,"padding-responsive","space-y-6"],[1,"w-10","h-10","rounded-lg","bg-gradient-to-br","from-blue-500","to-purple-600","flex","items-center","justify-center"],[1,"fas","fa-lightbulb","text-white"],[1,"subheading-responsive","text-gray-900","dark:text-gray-100"],[1,"text-responsive","text-gray-700","dark:text-gray-300","leading-relaxed"],[1,"glass","rounded-xl","p-6","border-l-4","border-accent"],[1,"fas","fa-star","text-accent","text-xl"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-900","dark:text-gray-100"],[1,"list-modern"],[1,"text-sm","sm:text-base","text-gray-800","dark:text-gray-200"],[1,"padding-responsive"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-10","h-10","rounded-lg","bg-gradient-to-br","from-green-500","to-teal-600","flex","items-center","justify-center"],[1,"fas","fa-code","text-white"],["value","0"],[1,"flex","flex-wrap","gap-2","mb-6"],["value","0",1,"flex","items-center","gap-2"],[1,"fas","fa-times-circle","text-red-500"],[1,"text-sm","sm:text-base","font-semibold"],["value","1",1,"flex","items-center","gap-2"],[1,"fas","fa-check-circle","text-green-500"],[1,"code-block-modern"],[1,"overflow-x-auto","text-sm","sm:text-base"],["value","1"],[1,"w-10","h-10","rounded-lg","bg-gradient-to-br","from-purple-500","to-pink-600","flex","items-center","justify-center"],[1,"fas","fa-play-circle","text-white"],[1,"text-responsive","text-gray-700","dark:text-gray-300","mb-8"],[1,"space-y-8"],[1,"border-2","border-gray-200","dark:border-gray-700","rounded-lg","p-4"],[1,"text-lg","font-semibold","text-gray-800","dark:text-gray-200","mb-4"],["label","Test map()","icon","pi pi-play",1,"mb-4",3,"click"],[1,"bg-gray-100","dark:bg-gray-700","p-4","rounded"],[1,"border-2","border-green-200","dark:border-green-800","rounded-lg","p-4"],[1,"text-lg","font-semibold","text-green-800","dark:text-green-200","mb-4"],[1,"text-sm","text-gray-600","dark:text-gray-400","mb-2"],["label","Test switchMap() (Rapid Queries)","icon","pi pi-search","severity","success",1,"mb-4",3,"click"],[1,"bg-green-50","dark:bg-green-900/20","p-4","rounded","mb-2"],[1,"bg-gray-100","dark:bg-gray-700","p-4","rounded","max-h-32","overflow-y-auto"],[1,"border-2","border-blue-200","dark:border-blue-800","rounded-lg","p-4"],[1,"text-lg","font-semibold","text-blue-800","dark:text-blue-200","mb-4"],["label","Test mergeMap() (Parallel)","icon","pi pi-upload",1,"mb-4",3,"click"],[1,"bg-blue-50","dark:bg-blue-900/20","p-4","rounded"],[1,"border-2","border-purple-200","dark:border-purple-800","rounded-lg","p-4"],[1,"text-lg","font-semibold","text-purple-800","dark:text-purple-200","mb-4"],["label","Test concatMap() (Sequential)","icon","pi pi-list",1,"mb-4",3,"click"],[1,"bg-purple-50","dark:bg-purple-900/20","p-4","rounded"],[1,"border-2","border-orange-200","dark:border-orange-800","rounded-lg","p-4"],[1,"text-lg","font-semibold","text-orange-800","dark:text-orange-200","mb-4"],["label","Test exhaustMap() (Save Button)","icon","pi pi-save",1,"mb-4",3,"click"],[1,"bg-orange-50","dark:bg-orange-900/20","p-4","rounded"],[1,"w-10","h-10","rounded-lg","bg-gradient-to-br","from-teal-500","to-cyan-600","flex","items-center","justify-center"],[1,"fas","fa-graduation-cap","text-white"],[1,"text-sm"],[1,"text-sm","font-semibold"],[1,"text-xs","font-semibold","mb-2"],[1,"list-disc","list-inside","text-xs","space-y-1"]],template:function(a,s){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),e(),t(7,"div")(8,"span",7),i(9,"RxJS Operators"),e()()(),t(10,"h1",8),i(11," Transformation Operators "),e(),t(12,"p",9),i(13," Understanding flattening operators: "),t(14,"code"),i(15,"map()"),e(),i(16,", "),t(17,"code"),i(18,"switchMap()"),e(),i(19,", "),t(20,"code"),i(21,"mergeMap()"),e(),i(22,", "),t(23,"code"),i(24,"concatMap()"),e(),i(25,", "),t(26,"code"),i(27,"exhaustMap()"),e()()(),t(28,"div",10)(29,"div",11),l(30,"i",12),e()()()(),t(31,"p-card",13)(32,"div",14)(33,"div",4)(34,"div",15),l(35,"i",16),e(),t(36,"h2",17),i(37,"What are Transformation Operators?"),e()(),t(38,"p",18),i(39," Transformation operators modify values emitted by observables. Flattening operators (switchMap, mergeMap, etc.) are critical for handling async operations and preventing race conditions. "),e(),t(40,"div",19)(41,"div",4),l(42,"i",20),t(43,"h3",21),i(44,"Operator Selection"),e()(),t(45,"ul",22)(46,"li",23)(47,"strong"),i(48,"map():"),e(),i(49," Simple 1-to-1 transformation "),e(),t(50,"li",23)(51,"strong"),i(52,"switchMap():"),e(),i(53," Cancels previous inner observable (search, typeahead) "),e(),t(54,"li",23)(55,"strong"),i(56,"mergeMap():"),e(),i(57," Maintains all inner observables concurrently (parallel operations) "),e(),t(58,"li",23)(59,"strong"),i(60,"concatMap():"),e(),i(61," Queues inner observables sequentially (order matters) "),e(),t(62,"li",23)(63,"strong"),i(64,"exhaustMap():"),e(),i(65," Ignores new values until current completes (prevent duplicates) "),e()()()()(),t(66,"p-card",13)(67,"div",24)(68,"div",25)(69,"div",26),l(70,"i",27),e(),t(71,"h2",17),i(72,"Code Examples"),e()(),t(73,"p-tabs",28)(74,"p-tablist",29)(75,"p-tab",30),l(76,"i",31),t(77,"span",32),i(78,"Violation"),e()(),t(79,"p-tab",33),l(80,"i",34),t(81,"span",32),i(82,"Solution"),e()()(),t(83,"p-tabpanels")(84,"p-tabpanel",28)(85,"div",35)(86,"pre",36)(87,"code"),i(88),e()()()(),t(89,"p-tabpanel",37)(90,"div",35)(91,"pre",36)(92,"code"),i(93),e()()()()()()()(),t(94,"p-card",13)(95,"div",24)(96,"div",4)(97,"div",38),l(98,"i",39),e(),t(99,"h2",17),i(100,"Interactive Demo"),e()(),t(101,"p",40),i(102," Test each operator to see how they handle multiple emissions differently. "),e(),t(103,"div",41)(104,"div",42)(105,"h3",43),i(106,"map() - Simple Transformation"),e(),t(107,"p-button",44),x("click",function(){return s.testMap()}),e(),m(108,B,3,1,"div",45),e(),t(109,"div",46)(110,"h3",47),i(111,"switchMap() - Cancels Previous"),e(),t(112,"p",48),i(113," Simulates rapid search queries. Notice how only the latest result is shown. "),e(),t(114,"p-button",49),x("click",function(){return s.testSwitchMap()}),e(),m(115,Q,3,1,"div",50),m(116,G,6,0,"div",51),e(),t(117,"div",52)(118,"h3",53),i(119,"mergeMap() - Parallel Execution"),e(),t(120,"p",48),i(121," Simulates parallel file uploads. All requests execute concurrently. "),e(),t(122,"p-button",54),x("click",function(){return s.testMergeMap()}),e(),m(123,H,3,1,"div",55),e(),t(124,"div",56)(125,"h3",57),i(126,"concatMap() - Sequential Execution"),e(),t(127,"p",48),i(128," Simulates sequential actions. Each action waits for the previous to complete. "),e(),t(129,"p-button",58),x("click",function(){return s.testConcatMap()}),e(),m(130,V,3,1,"div",59),e(),t(131,"div",60)(132,"h3",61),i(133,"exhaustMap() - Ignore While Busy"),e(),t(134,"p",48),i(135," Simulates rapid save clicks. Only the first click is processed, others are ignored. "),e(),t(136,"p-button",62),x("click",function(){return s.testExhaustMap()}),e(),m(137,J,3,1,"div",63),e()()()(),t(138,"p-card",13)(139,"div",24)(140,"div",25)(141,"div",64),l(142,"i",65),e(),t(143,"h2",17),i(144,"Key Takeaways"),e()(),t(145,"ul",22)(146,"li",23),i(147," Use "),t(148,"code"),i(149,"switchMap()"),e(),i(150," for search/typeahead - cancels previous requests "),e(),t(151,"li",23),i(152," Use "),t(153,"code"),i(154,"mergeMap()"),e(),i(155," for parallel independent operations (uploads, analytics) "),e(),t(156,"li",23),i(157," Use "),t(158,"code"),i(159,"concatMap()"),e(),i(160," when order matters (sequential updates, transactions) "),e(),t(161,"li",23),i(162," Use "),t(163,"code"),i(164,"exhaustMap()"),e(),i(165," to prevent duplicate submissions (save button, login) "),e(),t(166,"li",23),i(167," Never use "),t(168,"code"),i(169,"mergeMap()"),e(),i(170," for search - causes race conditions! "),e()()()()()),a&2&&(o(88),p(s.violationCode),o(5),p(s.solutionCode),o(15),c(s.mapResult()?108:-1),o(7),c(s.switchMapResult()?115:-1),o(),c(s.requestLogs().length>0?116:-1),o(7),c(s.mergeMapResult()?123:-1),o(7),c(s.concatMapResult()?130:-1),o(7),c(s.exhaustMapResult()?137:-1))},dependencies:[w,I,O,U,$,L,N,P,q,R,D,j],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};export{W as TransformationOperatorsDemoComponent};
